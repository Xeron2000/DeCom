import{b2 as at,b3 as nt,b4 as Hs,b5 as Ds,b6 as xt,b7 as H,b8 as F,p as Tt,ay as X,K as It,f as Pt,Q as Ct,b9 as At,a1 as K,ba as je,R as V,B as pe,j as b,G as Rt,bb as Gs,bc as zs,bd as oe,be as rt,_ as Bt,bf as Vs,bg as Mt,bh as kt,bi as $s,bj as Z,an as Ws,bk as Fe,aa as Ge,bl as Ks,b1 as ze,bm as Js,r as R,bn as ee,al as Lt,am as qt,bo as Ys,i as ye,J as k,bp as Ot,bq as J,a7 as P,X as Nt,Y as jt,m as Ft,I as Ut,Z as Ht,br as Ue,bs as Dt,bt as Gt,bu as be,bv as zt,bw as Vt,a6 as $t,bx as Wt,a3 as te,ab as we,by as Ve,bz as Qs,ac as O,ad as $e,bA as We,$ as Xs,bB as Zs,bC as ea,bD as Kt,bE as ta,bF as Jt,bG as he,a8 as sa,bH as Yt,bI as Qt,bJ as Xt,bK as Ke,aA as aa,bL as na,bM as ra,bN as oa,bO as ia,bP as ca,ai as Je,bQ as ua,bR as da,bS as Zt,c as es,bT as ts,bU as ss,bV as He,bW as as,bX as ns,ak as rs,bY as la,bZ as fa,b_ as ha,b$ as ma,c0 as ga,A as pa,c1 as ya,c2 as ba,c3 as wa,c4 as _a,c5 as Ea,c6 as va,c7 as Sa,c8 as xa,c9 as Ta,ca as Ia,cb as Pa,a5 as Ca,cc as Aa,cd as Ra,ce as Ba,u as Ma,cf as ka,cg as La,ch as qa,ci as Oa,cj as Na,ck as ja,cl as Fa,aG as Ua,aF as Ha,aE as Da,cm as Ga,cn as za,co as Va,cp as $a,cq as Wa,cr as Ka,cs as Ja,ct as Ya,cu as Qa,E as Xa,F as Za,cv as en,cw as tn,cx as sn,H as an,cy as nn,cz as rn,cA as on,cB as cn,cC as un,cD as dn,cE as ln,cF as fn,cG as hn,cH as mn,cI as gn,cJ as pn,y as yn,cK as bn,cL as wn,cM as _n,cN as En,cO as vn,cP as Sn,cQ as xn,cR as Tn,cS as In,cT as Pn,cU as Cn,cV as An,cW as Rn,O as Bn,cX as Mn,cY as kn,cZ as Ln,c_ as qn,c$ as On,d0 as Nn,d1 as jn,d2 as Fn,d3 as Un,d4 as Hn,d5 as Dn,d6 as Gn,d7 as zn,d8 as Vn,d9 as $n,da as Wn,db as Kn,dc as Jn,dd as Yn,de as Qn,df as Xn,dg as Zn,dh as er,C as tr,di as sr,dj as ar,dk as nr,T as rr,dl as or,dm as ir,dn as cr,dp as ur,dq as dr,dr as lr,ds as fr,dt as hr,a4 as mr,x as gr,du as pr,U as yr,dv as br,S as wr,W as _r,dw as Er,o as vr,dx as Sr,dy as xr,dz as Tr,dA as Ir,dB as Pr,V as Cr,dC as Ar,k as Rr,dD as Br,d as Mr,dE as kr,a$ as Lr,dF as qr,au as Or,aw as Nr,at as jr,as as Fr,dG as Ur,dH as Hr,dI as Dr,dJ as Gr,h as zr,dK as Vr,dL as $r,a2 as Wr,dM as Kr,dN as Jr,dO as Yr,dP as Qr,dQ as Xr,dR as ot,dS as it,dT as Zr,dU as eo,dV as to,dW as so,aD as ao,aJ as no,av as ro,aK as oo,ap as io,dX as co,dY as uo,dZ as lo,d_ as fo,d$ as ho,e0 as ct,e1 as ie,e2 as ut,P as mo,e3 as go,e4 as po,e5 as yo,e6 as bo,b0 as wo,aq as _o,e7 as Eo,e8 as vo,e9 as So,ea as xo,eb as To,ec as Io,ed as Po,ee as Co,ef as Ao,eg as Ro,eh as Bo,ei as Mo,ej as ko,ek as Lo,el as qo,em as Oo,en as No,eo as jo,ep as Fo,eq as Uo,er as Ho,es as Do,et as Go,eu as zo,ev as Vo,ew as $o,ex as Wo,ey as Ko,ez as Jo,eA as Yo,eB as Qo,eC as Xo,eD as Zo,eE as ei,eF as ti,eG as si,eH as ai,eI as ni,eJ as ri,eK as oi,eL as ii,eM as ci,eN as ui,eO as di,eP as li,eQ as fi,eR as hi,eS as mi,eT as gi,eU as pi,eV as yi,eW as bi,eX as wi,eY as _i,z as Ei,eZ as vi,e_ as Si,e$ as xi,f0 as Ti,f1 as Ii,f2 as Pi,f3 as Ci,f4 as Ai,f5 as Ri,f6 as Bi,f7 as Mi,f8 as ki,f9 as Li,fa as qi,fb as Oi,fc as Ni,fd as ji,fe as Fi,ff as Ui,fg as Hi,fh as Di,fi as Gi,fj as zi,fk as Vi,fl as $i,fm as Wi,fn as Ki,fo as Ji,fp as Yi,fq as Qi,fr as Xi,fs as Zi,ft as ec,fu as tc,fv as sc,fw as ac,fx as nc,fy as rc,fz as oc,fA as ic,fB as cc,fC as uc,fD as dc,fE as lc,fF as fc,fG as hc,aB as mc,fH as gc,fI as pc,fJ as yc,fK as bc,fL as wc,aj as _c,fM as Ec,fN as vc,fO as Sc,fP as dt,fQ as xc,fR as Tc,fS as Ic,a_ as Pc,n as Cc,s as Ac,fT as Rc,fU as lt,fV as Bc,fW as Mc,fX as kc,fY as Lc,ah as qc,fZ as Oc,ao as B,ar as Nc,g as jc}from"./index-fpAAkCtu.js";import{d as Fc}from"./index-BBOeJLmM.js";import{f as Uc,g as os,h as is,i as Hc,j as Dc,k as cs,l as us,w as ds,p as ls,m as Gc,s as fs,B as zc,W as Vc,c as $c,b as Wc,e as Kc,d as ft,n as Jc,o as Yc,a as Qc,z as Xc}from"./parseSignature-DYw6Hr9o.js";import{f as Zc,s as eu}from"./fallback-BsJoIGXi.js";import{ccipRequest as ht,offchainLookup as tu,offchainLookupAbiItem as su,offchainLookupSignature as au}from"./ccip-C6lkXUv7.js";import{e as nu}from"./events-CVmz8IQ4.js";function ru(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const r=Object.getOwnPropertyDescriptor(s,n);r&&Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function ou(e){let t;if(typeof e=="string")t=at(e,{modifiers:nt});else{const a=Hs(e),s=e.length;for(let n=0;n<s;n++){const r=e[n];if(!Ds(r)){t=at(r,{modifiers:nt,structs:a});break}}}if(!t)throw new xt({param:e});return t}function De(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function iu(e){return e.opcode==="CREATE2"?ms(e):hs(e)}function hs(e){const t=H(F(e.from));let a=H(e.nonce);return a[0]===0&&(a=new Uint8Array([])),F(`0x${X(Ct([t,a],"bytes")).slice(26)}`)}function ms(e){const t=H(F(e.from)),a=Tt(De(e.salt)?e.salt:H(e.salt),{size:32}),s="bytecodeHash"in e?De(e.bytecodeHash)?e.bytecodeHash:H(e.bytecodeHash):X(e.bytecode,"bytes");return F(It(X(Pt([H("0xff"),t,a,s])),12))}function cu({chains:e,id:t}){return e.find(a=>a.id===t)}function Ye(e,t="hex"){const a=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new At(e);return K(e)}return e})(),s=je(a,{recursiveReadLimit:Number.POSITIVE_INFINITY});return gs(s,t)}function gs(e,t="hex"){if(e.bytes.length===0)return t==="hex"?V(e.bytes):e.bytes;const a=e.readByte();if(a<128&&e.decrementPosition(1),a<192){const n=mt(e,a,128),r=e.readBytes(n);return t==="hex"?V(r):r}const s=mt(e,a,192);return uu(e,s,t)}function mt(e,t,a){if(a===128&&t<128)return 1;if(t<=a+55)return t-a;if(t===a+55+1)return e.readUint8();if(t===a+55+2)return e.readUint16();if(t===a+55+3)return e.readUint24();if(t===a+55+4)return e.readUint32();throw new pe("Invalid RLP prefix")}function uu(e,t,a){const s=e.position,n=[];for(;e.position-s<t;)n.push(gs(e,a));return n}function ps(e){return b(e)&&Rt(e)===32}const du=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ys=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),lu=ys.map(e=>(9*e+5)%16),bs=(()=>{const a=[[ys],[lu]];for(let s=0;s<4;s++)for(let n of a)n.push(n[s].map(r=>du[r]));return a})(),ws=bs[0],_s=bs[1],Es=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),fu=ws.map((e,t)=>e.map(a=>Es[t][a])),hu=_s.map((e,t)=>e.map(a=>Es[t][a])),mu=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),gu=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function gt(e,t,a,s){return e===0?t^a^s:e===1?t&a|~t&s:e===2?(t|~a)^s:e===3?t&s|a&~s:t^(a|~s)}const ce=new Uint32Array(16);class pu extends zs{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:a,h2:s,h3:n,h4:r}=this;return[t,a,s,n,r]}set(t,a,s,n,r){this.h0=t|0,this.h1=a|0,this.h2=s|0,this.h3=n|0,this.h4=r|0}process(t,a){for(let u=0;u<16;u++,a+=4)ce[u]=t.getUint32(a,!0);let s=this.h0|0,n=s,r=this.h1|0,i=r,c=this.h2|0,o=c,d=this.h3|0,l=d,f=this.h4|0,h=f;for(let u=0;u<5;u++){const m=4-u,g=mu[u],p=gu[u],_=ws[u],y=_s[u],x=fu[u],w=hu[u];for(let T=0;T<16;T++){const I=oe(s+gt(u,r,c,d)+ce[_[T]]+g,x[T])+f|0;s=f,f=d,d=oe(c,10)|0,c=r,r=I}for(let T=0;T<16;T++){const I=oe(n+gt(m,i,o,l)+ce[y[T]]+p,w[T])+h|0;n=h,h=l,l=oe(o,10)|0,o=i,i=I}}this.set(this.h1+c+l|0,this.h2+d+h|0,this.h3+f+n|0,this.h4+s+i|0,this.h0+r+o|0)}roundClean(){rt(ce)}destroy(){this.destroyed=!0,rt(this.buffer),this.set(0,0,0,0,0)}}const yu=Gs(()=>new pu),bu=yu;function wu(e,t){const a=t||"hex",s=bu(b(e,{strict:!1})?H(e):e);return a==="bytes"?s:Bt(s)}const ke=new Map;async function _u(e){const{getSocket:t,keepAlive:a=!0,key:s="socket",reconnect:n=!0,url:r}=e,{interval:i=3e4}=typeof a=="object"?a:{},{attempts:c=5,delay:o=2e3}=typeof n=="object"?n:{},d=JSON.stringify({keepAlive:a,key:s,url:r,reconnect:n});let l=ke.get(d);if(l)return l;let f=0;const{schedule:h}=Vs({id:d,fn:async()=>{const g=new Map,p=new Map;let _,y,x,w=!1;function T(){if(n&&f<c){if(w)return;w=!0,f++,y==null||y.close(),setTimeout(async()=>{await I().catch(console.error),w=!1},o)}else g.clear(),p.clear()}async function I(){const E=await t({onClose(){var v,C;for(const S of g.values())(v=S.onError)==null||v.call(S,new Z({url:r}));for(const S of p.values())(C=S.onError)==null||C.call(S,new Z({url:r}));T()},onError(v){var C,S;_=v;for(const A of g.values())(C=A.onError)==null||C.call(A,_);for(const A of p.values())(S=A.onError)==null||S.call(A,_);T()},onOpen(){_=void 0,f=0},onResponse(v){const C=v.method==="eth_subscription",S=C?v.params.subscription:v.id,A=C?p:g,M=A.get(S);M&&M.onResponse(v),C||A.delete(S)}});if(y=E,a&&(x&&clearInterval(x),x=setInterval(()=>{var v;return(v=y.ping)==null?void 0:v.call(y)},i)),n&&p.size>0){const v=p.entries();for(const[C,{onResponse:S,body:A,onError:M}]of v)A&&(p.delete(C),l==null||l.request({body:A,onResponse:S,onError:M}))}return E}return await I(),_=void 0,l={close(){x&&clearInterval(x),y.close(),ke.delete(d)},get socket(){return y},request({body:E,onError:v,onResponse:C}){_&&v&&v(_);const S=E.id??$s.take(),A=M=>{var Q;typeof M.id=="number"&&S!==M.id||(E.method==="eth_subscribe"&&typeof M.result=="string"&&p.set(M.result,{onResponse:A,onError:v,body:E}),E.method==="eth_unsubscribe"&&p.delete((Q=E.params)==null?void 0:Q[0]),C(M))};g.set(S,{onResponse:A,onError:v});try{y.request({body:{jsonrpc:"2.0",id:S,...E}})}catch(M){v==null||v(M)}},requestAsync({body:E,timeout:v=1e4}){return Mt(()=>new Promise((C,S)=>this.request({body:E,onError:S,onResponse:C})),{errorInstance:new kt({body:E,url:r}),timeout:v})},requests:g,subscriptions:p,url:r},ke.set(d,l),[l]}}),[u,[m]]=await h();return m}async function me(e,t={}){const{keepAlive:a,reconnect:s}=t;return _u({async getSocket({onClose:n,onError:r,onOpen:i,onResponse:c}){const o=await Ws(()=>import("./native-CJ5et6AR.js"),[]).then(u=>u.WebSocket),d=new o(e);function l(){d.removeEventListener("close",l),d.removeEventListener("message",f),d.removeEventListener("error",r),d.removeEventListener("open",i),n()}function f({data:u}){if(!(typeof u=="string"&&u.trim().length===0))try{const m=JSON.parse(u);c(m)}catch(m){r(m)}}d.addEventListener("close",l),d.addEventListener("message",f),d.addEventListener("error",r),d.addEventListener("open",i),d.readyState===o.CONNECTING&&await new Promise((u,m)=>{d&&(d.onopen=u,d.onerror=m)});const{close:h}=d;return Object.assign(d,{close(){h.bind(d)(),l()},ping(){try{if(d.readyState===d.CLOSED||d.readyState===d.CLOSING)throw new Fe({url:d.url,cause:new Z({url:d.url})});const u={jsonrpc:"2.0",id:null,method:"net_version",params:[]};d.send(JSON.stringify(u))}catch(u){r(u)}},request({body:u}){if(d.readyState===d.CLOSED||d.readyState===d.CLOSING)throw new Fe({body:u,url:d.url,cause:new Z({url:d.url})});return d.send(JSON.stringify(u))}})},keepAlive:a,reconnect:s,url:e})}async function Eu(e){const t=await me(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function vs(e){return Ge(e,-32)===Uc}function Ss(e){return Ks(e)}function vu(e){if(!vs(e))return{signature:e};const[t,a,s]=ze([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:a,signature:s}}function Su(e){if(!Ss(e))return{signature:e};const{authorization:t,to:a,...s}=Js(e);return{authorization:{address:t.address,chainId:t.chainId,nonce:Number(t.nonce),r:R(t.r,{size:32}),s:R(t.s,{size:32}),yParity:t.yParity},...a?{address:a}:{},...s}}async function xs({message:e,signature:t}){return ee({hash:Lt(e),signature:t})}async function Ts(e){const{domain:t,message:a,primaryType:s,signature:n,types:r}=e;return ee({hash:qt({domain:t,message:a,primaryType:s,types:r}),signature:n})}function xu(e){const{address:t,data:a,signature:s,to:n="hex"}=e,r=Ys({authorization:{address:e.authorization.address,chainId:e.authorization.chainId,nonce:BigInt(e.authorization.nonce),r:BigInt(e.authorization.r),s:BigInt(e.authorization.s),yParity:e.authorization.yParity},data:a,signature:s,to:t});return n==="hex"?r:K(r)}async function Tu({address:e,hash:t,signature:a}){return ye(F(e),await ee({hash:t,signature:a}))}async function Iu({address:e,message:t,signature:a}){return ye(F(e),await xs({message:t,signature:a}))}async function Pu(e){const{address:t,domain:a,message:s,primaryType:n,signature:r,types:i}=e;return ye(F(t),await Ts({domain:a,message:s,primaryType:n,signature:r,types:i}))}function Is(e){const t=Ge(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&k(t)>=192)return"legacy";throw new Ot({serializedType:t})}function Ps(e){const t=Is(e);return t==="eip1559"?Ru(e):t==="eip2930"?Bu(e):t==="eip4844"?Au(e):t==="eip7702"?Cu(e):Mu(e)}function Cu(e){const t=_e(e),[a,s,n,r,i,c,o,d,l,f,h,u,m]=t;if(t.length!==10&&t.length!==13)throw new J({attributes:{chainId:a,nonce:s,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:d,accessList:l,authorizationList:f,...t.length>9?{v:h,r:u,s:m}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:k(a),type:"eip7702"};return b(c)&&c!=="0x"&&(g.to=c),b(i)&&i!=="0x"&&(g.gas=P(i)),b(d)&&d!=="0x"&&(g.data=d),b(s)&&(g.nonce=s==="0x"?0:k(s)),b(o)&&o!=="0x"&&(g.value=P(o)),b(r)&&r!=="0x"&&(g.maxFeePerGas=P(r)),b(n)&&n!=="0x"&&(g.maxPriorityFeePerGas=P(n)),l.length!==0&&l!=="0x"&&(g.accessList=Ee(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=ku(f)),Dc(g),{...t.length===13?se(t):void 0,...g}}function Au(e){const t=_e(e),a=t.length===4,s=a?t[0]:t,n=a?t.slice(1):[],[r,i,c,o,d,l,f,h,u,m,g,p,_,y]=s,[x,w,T]=n;if(!(s.length===11||s.length===14))throw new J({attributes:{chainId:r,nonce:i,maxPriorityFeePerGas:c,maxFeePerGas:o,gas:d,to:l,value:f,data:h,accessList:u,...s.length>9?{v:p,r:_,s:y}:{}},serializedTransaction:e,type:"eip4844"});const I={blobVersionedHashes:g,chainId:k(r),to:l,type:"eip4844"};return b(d)&&d!=="0x"&&(I.gas=P(d)),b(h)&&h!=="0x"&&(I.data=h),b(i)&&(I.nonce=i==="0x"?0:k(i)),b(f)&&f!=="0x"&&(I.value=P(f)),b(m)&&m!=="0x"&&(I.maxFeePerBlobGas=P(m)),b(o)&&o!=="0x"&&(I.maxFeePerGas=P(o)),b(c)&&c!=="0x"&&(I.maxPriorityFeePerGas=P(c)),u.length!==0&&u!=="0x"&&(I.accessList=Ee(u)),x&&w&&T&&(I.sidecars=Nt({blobs:x,commitments:w,proofs:T})),Hc(I),{...s.length===14?se(s):void 0,...I}}function Ru(e){const t=_e(e),[a,s,n,r,i,c,o,d,l,f,h,u]=t;if(!(t.length===9||t.length===12))throw new J({attributes:{chainId:a,nonce:s,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:d,accessList:l,...t.length>9?{v:f,r:h,s:u}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:k(a),type:"eip1559"};return b(c)&&c!=="0x"&&(m.to=c),b(i)&&i!=="0x"&&(m.gas=P(i)),b(d)&&d!=="0x"&&(m.data=d),b(s)&&(m.nonce=s==="0x"?0:k(s)),b(o)&&o!=="0x"&&(m.value=P(o)),b(r)&&r!=="0x"&&(m.maxFeePerGas=P(r)),b(n)&&n!=="0x"&&(m.maxPriorityFeePerGas=P(n)),l.length!==0&&l!=="0x"&&(m.accessList=Ee(l)),os(m),{...t.length===12?se(t):void 0,...m}}function Bu(e){const t=_e(e),[a,s,n,r,i,c,o,d,l,f,h]=t;if(!(t.length===8||t.length===11))throw new J({attributes:{chainId:a,nonce:s,gasPrice:n,gas:r,to:i,value:c,data:o,accessList:d,...t.length>8?{v:l,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const u={chainId:k(a),type:"eip2930"};return b(i)&&i!=="0x"&&(u.to=i),b(r)&&r!=="0x"&&(u.gas=P(r)),b(o)&&o!=="0x"&&(u.data=o),b(s)&&(u.nonce=s==="0x"?0:k(s)),b(c)&&c!=="0x"&&(u.value=P(c)),b(n)&&n!=="0x"&&(u.gasPrice=P(n)),d.length!==0&&d!=="0x"&&(u.accessList=Ee(d)),is(u),{...t.length===11?se(t):void 0,...u}}function Mu(e){const t=Ye(e,"hex"),[a,s,n,r,i,c,o,d,l]=t;if(!(t.length===6||t.length===9))throw new J({attributes:{nonce:a,gasPrice:s,gas:n,to:r,value:i,data:c,...t.length>6?{v:o,r:d,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(b(r)&&r!=="0x"&&(f.to=r),b(n)&&n!=="0x"&&(f.gas=P(n)),b(c)&&c!=="0x"&&(f.data=c),b(a)&&(f.nonce=a==="0x"?0:k(a)),b(i)&&i!=="0x"&&(f.value=P(i)),b(s)&&s!=="0x"&&(f.gasPrice=P(s)),cs(f),t.length===6)return f;const h=b(o)&&o!=="0x"?P(o):0n;if(l==="0x"&&d==="0x")return h>0&&(f.chainId=Number(h)),f;const u=h,m=Number((u-35n)/2n);if(m>0)f.chainId=m;else if(u!==27n&&u!==28n)throw new jt({v:u});return f.v=u,f.s=l,f.r=d,f.yParity=u%2n===0n?1:0,f}function _e(e){return Ye(`0x${e.slice(4)}`,"hex")}function Ee(e){const t=[];for(let a=0;a<e.length;a++){const[s,n]=e[a];if(!Ft(s,{strict:!1}))throw new Ut({address:s});t.push({address:s,storageKeys:n.map(r=>ps(r)?r:Ht(r))})}return t}function ku(e){const t=[];for(let a=0;a<e.length;a++){const[s,n,r,i,c,o]=e[a];t.push({address:n,chainId:s==="0x"?0:k(s),nonce:r==="0x"?0:k(r),...se([i,c,o])})}return t}function se(e){const t=e.slice(-3),a=t[0]==="0x"||P(t[0])===0n?27n:28n;return{r:Ue(t[1],{size:32}),s:Ue(t[2],{size:32}),v:a,yParity:a===27n?0:1}}class Cs extends pe{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Qe(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Cs({value:e});let[a,s="0"]=e.split(".");const n=a.startsWith("-");if(n&&(a=a.slice(1)),s=s.replace(/(0+)$/,""),t===0)Math.round(+`.${s}`)===1&&(a=`${BigInt(a)+1n}`),s="";else if(s.length>t){const[r,i,c]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],o=Math.round(+`${i}.${c}`);o>9?s=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):s=`${r}${o}`,s.length>t&&(s=s.slice(1),a=`${BigInt(a)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${n?"-":""}${a}${s}`)}function Lu(e,t="wei"){return Qe(e,Dt[t])}function qu(e,t="wei"){return Qe(e,Gt[t])}async function Ou(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function Nu(e){return e.request({method:`${e.mode}_dumpState`})}async function ju(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function Fu(e){return await e.request({method:"txpool_content"})}async function Uu(e){const{pending:t,queued:a}=await e.request({method:"txpool_status"});return{pending:k(t),queued:k(a)}}async function Hu(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Du(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[R(t)]})}async function Gu(e){return await e.request({method:"txpool_inspect"})}async function zu(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Vu(e,{blocks:t,interval:a}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:R(t)}]}):await e.request({method:`${e.mode}_mine`,params:[R(t),R(a||0)]})}async function $u(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Wu(e,{blockNumber:t,jsonRpcUrl:a}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:a}}]})}async function Ku(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function Ju(e,t){var _,y,x;const{accessList:a,data:s,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:d,to:l,value:f,...h}=t,u=(x=(y=(_=e.chain)==null?void 0:_.formatters)==null?void 0:y.transactionRequest)==null?void 0:x.format,g=(u||be)({...zt(h,{format:u}),accessList:a,data:s,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:d,to:l,value:f},"sendUnsignedTransaction");return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function Yu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function Qu(e,{address:t,value:a}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,R(a)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,R(a)]})}async function Xu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[R(t)]})}async function Zu(e,{interval:t}){const a=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[a]})}async function ed(e,{address:t,bytecode:a}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,a]}):await e.request({method:`${e.mode}_setCode`,params:[t,a]})}async function td(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function sd(e,{interval:t}){const a=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[a]})}async function ad(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function nd(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[R(t)]})}async function rd(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[R(t)]})}async function od(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[R(t)]})}async function id(e,{address:t,nonce:a}){await e.request({method:`${e.mode}_setNonce`,params:[t,R(a)]})}async function cd(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function ud(e,{address:t,index:a,value:s}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof a=="number"?R(a):a,s]})}async function dd(e){return await e.request({method:"evm_snapshot"})}async function ld(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function fd(e,{chain:t}){const{id:a,name:s,nativeCurrency:n,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:R(a),chainName:s,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function hd(e,t){const{abi:a,args:s,bytecode:n,...r}=t,i=Vt({abi:a,args:s,bytecode:n});return $t(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function md(e){var a;return((a=e.account)==null?void 0:a.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(s=>Wt(s))}async function gd(e,t={}){const{account:a=e.account,chainId:s}=t,n=a?te(a):void 0,r=s?[n==null?void 0:n.address,[R(s)]]:[n==null?void 0:n.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[o,d]of Object.entries(i)){c[Number(o)]={};for(let[l,f]of Object.entries(d))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(o)][l]=f}return typeof s=="number"?c[s]:c}async function pd(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function yd(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(a=>F(a))}async function bd(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function wd(e,t){const{chain:a=e.chain}=t,s=t.timeout??Math.max(((a==null?void 0:a.blockTime)??0)*3,5e3),n=await us(e,t);return await ds(e,{...t,id:n.id,timeout:s})}const Le=new Xs(128);async function As(e,t){var T,I,E,v;const{account:a=e.account,chain:s=e.chain,accessList:n,authorizationList:r,blobs:i,data:c,gas:o,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:u,pollingInterval:m,throwOnReceiptRevert:g,type:p,value:_,...y}=t,x=t.timeout??Math.max(((s==null?void 0:s.blockTime)??0)*3,5e3);if(typeof a>"u")throw new we({docsPath:"/docs/actions/wallet/sendTransactionSync"});const w=a?te(a):null;try{Ve(t);const C=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await Qs({authorization:r[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let S;s!==null&&(S=await O(e,$e,"getChainId")({}),We({currentChainId:S,chain:s}));const A=(E=(I=(T=e.chain)==null?void 0:T.formatters)==null?void 0:I.transactionRequest)==null?void 0:E.format,Q=(A||be)({...zt(y,{format:A}),accessList:n,account:w,authorizationList:r,blobs:i,chainId:S,data:c,gas:o,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:u,to:C,type:p,value:_},"sendTransaction"),tt=Le.get(e.uid),Fs=tt?"wallet_sendTransaction":"eth_sendTransaction",Us=await(async()=>{try{return await e.request({method:Fs,params:[Q]},{retryCount:0})}catch(st){if(tt===!1)throw st;const G=st;if(G.name==="InvalidInputRpcError"||G.name==="InvalidParamsRpcError"||G.name==="MethodNotFoundRpcError"||G.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[Q]},{retryCount:0}).then(Be=>(Le.set(e.uid,!0),Be)).catch(Be=>{const Me=Be;throw Me.name==="MethodNotFoundRpcError"||Me.name==="MethodNotSupportedRpcError"?(Le.set(e.uid,!1),G):Me});throw G}})(),Re=await O(e,Zs,"waitForTransactionReceipt")({checkReplacement:!1,hash:Us,pollingInterval:m,timeout:x});if(g&&Re.status==="reverted")throw new ea({receipt:Re});return Re}if((w==null?void 0:w.type)==="local"){const S=await O(e,Kt,"prepareTransactionRequest")({account:w,accessList:n,authorizationList:r,blobs:i,chain:s,data:c,gas:o,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:u,nonceManager:w.nonceManager,parameters:[...ta,"sidecars"],type:p,value:_,...y,to:C}),A=(v=s==null?void 0:s.serializers)==null?void 0:v.transaction,M=await w.signTransaction(S,{serializer:A});return await O(e,Jt,"sendRawTransactionSync")({serializedTransaction:M,throwOnReceiptRevert:g})}throw(w==null?void 0:w.type)==="smart"?new he({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new he({docsPath:"/docs/actions/wallet/sendTransactionSync",type:w==null?void 0:w.type})}catch(C){throw C instanceof he?C:sa(C,{...t,account:w,chain:t.chain||void 0})}}async function _d(e,t){const{id:a}=t;await e.request({method:"wallet_showCallsStatus",params:[a]})}async function Ed(e,t){const{account:a=e.account}=t;if(!a)throw new we({docsPath:"/docs/eip7702/signAuthorization"});const s=te(a);if(!s.signAuthorization)throw new he({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const n=await ls(e,t);return s.signAuthorization(n)}async function vd(e,t){var d,l,f,h;const{account:a=e.account,chain:s=e.chain,...n}=t;if(!a)throw new we({docsPath:"/docs/actions/wallet/signTransaction"});const r=te(a);Ve({account:r,...t});const i=await O(e,$e,"getChainId")({});s!==null&&We({currentChainId:i,chain:s});const c=(s==null?void 0:s.formatters)||((d=e.chain)==null?void 0:d.formatters),o=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||be;return r.signTransaction?r.signTransaction({...n,chainId:i},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...o({...n,account:r},"signTransaction"),chainId:R(i),from:r.address}]},{retryCount:0})}async function Sd(e,t){const{account:a=e.account,domain:s,message:n,primaryType:r}=t;if(!a)throw new we({docsPath:"/docs/actions/wallet/signTypedData"});const i=te(a),c={EIP712Domain:Yt({domain:s}),...t.types};if(Qt({domain:s,message:n,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:s,message:n,primaryType:r,types:c});const o=Xt({domain:s,message:n,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,o]},{retryCount:0})}async function xd(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:R(t)}]},{retryCount:0})}async function Td(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function Id(e,t){return Ke.internal(e,As,"sendTransactionSync",t)}function Pd({abi:e,address:t,client:a}){const s=a,[n,r]=s?"public"in s&&"wallet"in s?[s.public,s.wallet]:"public"in s?[s.public,void 0]:"wallet"in s?[void 0,s.wallet]:[s,s]:[void 0,void 0],i=n!=null,c=r!=null,o={};let d=!1,l=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?d=!0:l=!0:h.type==="event"&&(f=!0),d&&l&&f)break;return i&&(d&&(o.read=new Proxy({},{get(h,u){return(...m)=>{const{args:g,options:p}=ue(m);return O(n,aa,"readContract")({abi:e,address:t,functionName:u,args:g,...p})}}})),l&&(o.simulate=new Proxy({},{get(h,u){return(...m)=>{const{args:g,options:p}=ue(m);return O(n,na,"simulateContract")({abi:e,address:t,functionName:u,args:g,...p})}}})),f&&(o.createEventFilter=new Proxy({},{get(h,u){return(...m)=>{const g=e.find(y=>y.type==="event"&&y.name===u),{args:p,options:_}=qe(m,g);return O(n,ra,"createContractEventFilter")({abi:e,address:t,eventName:u,args:p,..._})}}}),o.getEvents=new Proxy({},{get(h,u){return(...m)=>{const g=e.find(y=>y.type==="event"&&y.name===u),{args:p,options:_}=qe(m,g);return O(n,oa,"getContractEvents")({abi:e,address:t,eventName:u,args:p,..._})}}}),o.watchEvent=new Proxy({},{get(h,u){return(...m)=>{const g=e.find(y=>y.type==="event"&&y.name===u),{args:p,options:_}=qe(m,g);return O(n,ia,"watchContractEvent")({abi:e,address:t,eventName:u,args:p,..._})}}}))),c&&l&&(o.write=new Proxy({},{get(h,u){return(...m)=>{const{args:g,options:p}=ue(m);return O(r,Ke,"writeContract")({abi:e,address:t,functionName:u,args:g,...p})}}})),(i||c)&&l&&(o.estimateGas=new Proxy({},{get(h,u){return(...m)=>{const{args:g,options:p}=ue(m);return O(n??r,ca,"estimateContractGas")({abi:e,address:t,functionName:u,args:g,...p,account:p.account??r.account})}}})),o.address=t,o.abi=e,o}function ue(e){const t=e.length&&Array.isArray(e[0]),a=t?e[0]:[],s=(t?e[1]:e[0])??{};return{args:a,options:s}}function qe(e,t){let a=!1;Array.isArray(e[0])?a=!0:e.length===1?a=t.inputs.some(r=>r.indexed):e.length===2&&(a=!0);const s=a?e[0]:void 0,n=(a?e[1]:e[0])??{};return{args:s,options:n}}function Rs({mode:e}){return t=>{const a=t.extend(()=>({mode:e}));return{dropTransaction:s=>Ou(a,s),dumpState:()=>Nu(a),getAutomine:()=>ju(a),getTxpoolContent:()=>Fu(a),getTxpoolStatus:()=>Uu(a),impersonateAccount:s=>Hu(a,s),increaseTime:s=>Du(a,s),inspectTxpool:()=>Gu(a),loadState:s=>zu(a,s),mine:s=>Vu(a,s),removeBlockTimestampInterval:()=>$u(a),reset:s=>Wu(a,s),revert:s=>Ku(a,s),sendUnsignedTransaction:s=>Ju(a,s),setAutomine:s=>Yu(a,s),setBalance:s=>Qu(a,s),setBlockGasLimit:s=>Xu(a,s),setBlockTimestampInterval:s=>Zu(a,s),setCode:s=>ed(a,s),setCoinbase:s=>td(a,s),setIntervalMining:s=>sd(a,s),setLoggingEnabled:s=>ad(a,s),setMinGasPrice:s=>nd(a,s),setNextBlockBaseFeePerGas:s=>rd(a,s),setNextBlockTimestamp:s=>od(a,s),setNonce:s=>id(a,s),setRpcUrl:s=>cd(a,s),setStorageAt:s=>ud(a,s),snapshot:()=>dd(a),stopImpersonatingAccount:s=>ld(a,s)}}}function Cd(e){const{key:t="test",name:a="Test Client",mode:s}=e;return Je({...e,key:t,name:a,type:"testClient"}).extend(r=>({mode:s,...Rs({mode:s})(r)}))}function Bs(e){return{addChain:t=>fd(e,t),deployContract:t=>hd(e,t),getAddresses:()=>md(e),getCallsStatus:t=>Gc(e,t),getCapabilities:t=>gd(e,t),getChainId:()=>$e(e),getPermissions:()=>pd(e),prepareAuthorization:t=>ls(e,t),prepareTransactionRequest:t=>Kt(e,t),requestAddresses:()=>yd(e),requestPermissions:t=>bd(e,t),sendCalls:t=>us(e,t),sendCallsSync:t=>wd(e,t),sendRawTransaction:t=>da(e,t),sendRawTransactionSync:t=>Jt(e,t),sendTransaction:t=>$t(e,t),sendTransactionSync:t=>As(e,t),showCallsStatus:t=>_d(e,t),signAuthorization:t=>Ed(e,t),signMessage:t=>ua(e,t),signTransaction:t=>vd(e,t),signTypedData:t=>Sd(e,t),switchChain:t=>xd(e,t),waitForCallsStatus:t=>ds(e,t),watchAsset:t=>Td(e,t),writeContract:t=>Ke(e,t),writeContractSync:t=>Id(e,t)}}function Ad(e){const{key:t="wallet",name:a="Wallet Client",transport:s}=e;return Je({...e,key:t,name:a,transport:s,type:"walletClient"}).extend(Bs)}function Rd(e,t={}){const{keepAlive:a,key:s="webSocket",methods:n,name:r="WebSocket JSON-RPC",reconnect:i,retryDelay:c}=t;return({chain:o,retryCount:d,timeout:l})=>{var g;const f=t.retryCount??d,h=l??t.timeout??1e4,u=e||((g=o==null?void 0:o.rpcUrls.default.webSocket)==null?void 0:g[0]),m={keepAlive:a,reconnect:i};if(!u)throw new Zt;return es({key:s,methods:n,name:r,async request({method:p,params:_}){const y={method:p,params:_},x=await me(u,m),{error:w,result:T}=await x.requestAsync({body:y,timeout:h});if(w)throw new ts({body:y,error:w,url:u});return T},retryCount:f,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return Eu(u)},getRpcClient(){return me(u,m)},async subscribe({params:p,onData:_,onError:y}){const x=await me(u,m),{result:w}=await new Promise((T,I)=>x.request({body:{method:"eth_subscribe",params:p},onError(E){I(E),y==null||y(E)},onResponse(E){if(E.error){I(E.error),y==null||y(E.error);return}if(typeof E.id=="number"){T(E);return}E.method==="eth_subscription"&&_(E.params)}}));return{subscriptionId:w,async unsubscribe(){return new Promise(T=>x.request({body:{method:"eth_unsubscribe",params:[w]},onResponse:T}))}}}})}}class Bd extends Error{constructor(t,a){super(a),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=a}}const Oe="/docs/contract/decodeDeployData";function Md(e){const{abi:t,bytecode:a,data:s}=e;if(s===a)return{bytecode:a};const n=t.find(i=>"type"in i&&i.type==="constructor");if(!n)throw new ss({docsPath:Oe});if(!("inputs"in n))throw new He({docsPath:Oe});if(!n.inputs||n.inputs.length===0)throw new He({docsPath:Oe});return{args:ze(n.inputs,`0x${s.replace(a,"")}`),bytecode:a}}function kd(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),a=typeof e.blobs[0]=="string"?e.blobs.map(c=>K(c)):e.blobs,s=a.reduce((c,o)=>c+o.length,0),n=je(new Uint8Array(s));let r=!0;for(const c of a){const o=je(c);for(;r&&o.position<c.length;){o.incrementPosition(1);let d=31;c.length-o.position<31&&(d=c.length-o.position);for(const l in Array.from({length:d})){const f=o.readByte();if(f===128&&!o.inspectBytes(o.remaining).includes(128)){r=!1;break}n.pushByte(f)}}}const i=n.bytes.slice(0,n.position);return t==="hex"?V(i):i}function Ld(e){const{sidecars:t,version:a}=e,s=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),n=[];for(const{commitment:r}of t)n.push(as({commitment:r,to:s,version:a}));return n}const qd=2147483648;function Od(e){if(e===1)return 60n;if(e>=qd||e<0)throw new ns({chainId:e});return BigInt((2147483648|e)>>>0)}function Ms({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function Nd(e,t){try{e.loadTrustedSetup(t)}catch(a){const s=a;if(!s.message.includes("trusted setup is already loaded"))throw s}return Ms(e)}function jd({r:e,yParityAndS:t}){const a=K(t),s=a[0]&128?1:0,n=a;return s===1&&(n[0]&=127),{r:e,s:V(n),yParity:s}}function pt(e){const{r:t,s:a}=rs.Signature.fromCompact(e.slice(2,130));return{r:R(t,{size:32}),yParityAndS:R(a,{size:32})}}async function Fd(e){const{serializedTransaction:t,signature:a}=e,s=Ps(t),n=a??{r:s.r,s:s.s,v:s.v,yParity:s.yParity},r=fs({...s,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await ee({hash:X(r),signature:n})}function yt({r:e,yParityAndS:t}){return`0x${new rs.Signature(P(e),P(t)).toCompactHex()}`}function Ud(e){const{r:t,s:a,v:s,yParity:n}=e,r=Number(n??s-27n);let i=a;if(r===1){const c=K(a);c[0]|=128,i=V(c)}return{r:t,yParityAndS:i}}const Hd=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:ss,AbiConstructorParamsNotFoundError:He,AbiDecodingDataSizeInvalidError:la,AbiDecodingDataSizeTooSmallError:fa,AbiDecodingZeroDataError:ha,AbiEncodingArrayLengthMismatchError:ma,AbiEncodingBytesSizeMismatchError:ga,AbiEncodingLengthMismatchError:pa,AbiErrorInputsNotFoundError:ya,AbiErrorNotFoundError:ba,AbiErrorSignatureNotFoundError:wa,AbiEventNotFoundError:_a,AbiEventSignatureEmptyTopicsError:Ea,AbiEventSignatureNotFoundError:va,AbiFunctionNotFoundError:Sa,AbiFunctionOutputsNotFoundError:xa,AbiFunctionSignatureNotFoundError:Ta,AccountStateConflictError:Ia,AtomicReadyWalletRejectedUpgradeError:Pa,AtomicityNotSupportedError:Ca,BaseError:pe,BaseFeeScalarError:Aa,BlockNotFoundError:Ra,BundleFailedError:zc,BundleTooLargeError:Ba,BytesSizeMismatchError:Ma,CallExecutionError:ka,ChainDisconnectedError:La,ChainDoesNotSupportContract:qa,ChainMismatchError:Oa,ChainNotFoundError:Na,CircularReferenceError:ja,ClientChainNotConfiguredError:Fa,ContractFunctionExecutionError:Ua,ContractFunctionRevertedError:Ha,ContractFunctionZeroDataError:Da,CounterfactualDeploymentFailedError:Ga,DecodeLogDataMismatch:za,DecodeLogTopicsMismatch:Va,DuplicateIdError:$a,EIP1193ProviderRpcError:Bd,Eip1559FeesNotSupportedError:Wa,EnsAvatarInvalidNftUriError:Ka,EnsAvatarUnsupportedNamespaceError:Ja,EnsAvatarUriResolutionError:Ya,EnsInvalidChainIdError:ns,EstimateGasExecutionError:Qa,ExecutionRevertedError:Xa,FeeCapTooHighError:Za,FeeCapTooLowError:en,FeeConflictError:tn,FilterTypeNotSupportedError:sn,HttpRequestError:an,InsufficientFundsError:nn,IntegerOutOfRangeError:rn,InternalRpcError:on,IntrinsicGasTooHighError:cn,IntrinsicGasTooLowError:un,InvalidAbiDecodingTypeError:dn,InvalidAbiEncodingTypeError:ln,InvalidAbiItemError:fn,InvalidAbiParameterError:xt,InvalidAbiParametersError:hn,InvalidAbiTypeParameterError:mn,InvalidAddressError:Ut,InvalidArrayError:gn,InvalidBytesBooleanError:pn,InvalidChainIdError:yn,InvalidDecimalNumberError:Cs,InvalidDefinitionTypeError:bn,InvalidDomainError:wn,InvalidFunctionModifierError:_n,InvalidHexBooleanError:En,InvalidHexValueError:At,InvalidInputRpcError:vn,InvalidLegacyVError:jt,InvalidModifierError:Sn,InvalidParameterError:xn,InvalidParamsRpcError:Tn,InvalidParenthesisError:In,InvalidPrimaryTypeError:Pn,InvalidRequestRpcError:Cn,InvalidSerializableTransactionError:An,InvalidSerializedTransactionError:J,InvalidSerializedTransactionTypeError:Ot,InvalidSignatureError:Rn,InvalidStorageKeySizeError:Bn,InvalidStructSignatureError:Mn,InvalidStructTypeError:kn,JsonRpcVersionUnsupportedError:Ln,LimitExceededRpcError:qn,MaxFeePerGasTooLowError:On,MethodNotFoundRpcError:Nn,MethodNotSupportedRpcError:jn,NonceMaxValueError:Fn,NonceTooHighError:Un,NonceTooLowError:Hn,ParseRpcError:Dn,ProviderDisconnectedError:Gn,ProviderRpcError:zn,RawContractError:Vn,ResourceNotFoundRpcError:$n,ResourceUnavailableRpcError:Wn,RpcError:Kn,RpcRequestError:ts,SizeExceedsPaddingSizeError:Jn,SizeOverflowError:Yn,SliceOffsetOutOfBoundsError:Qn,SocketClosedError:Z,SolidityProtectedKeywordError:Xn,StateAssignmentConflictError:Zn,SwitchChainError:er,TimeoutError:kt,TipAboveFeeCapError:tr,TransactionExecutionError:sr,TransactionNotFoundError:ar,TransactionReceiptNotFoundError:nr,TransactionRejectedRpcError:rr,TransactionTypeNotSupportedError:or,UnauthorizedProviderError:ir,UnknownBundleIdError:cr,UnknownNodeError:ur,UnknownRpcError:dr,UnknownSignatureError:lr,UnknownTypeError:fr,UnsupportedChainIdError:hr,UnsupportedNonOptionalCapabilityError:mr,UnsupportedPackedAbiType:gr,UnsupportedProviderMethodError:pr,UrlRequiredError:Zt,UserRejectedRequestError:yr,WaitForCallsStatusTimeoutError:Vc,WaitForTransactionReceiptTimeoutError:br,WebSocketRequestError:Fe,assertCurrentChain:We,assertRequest:Ve,assertTransactionEIP1559:os,assertTransactionEIP2930:is,assertTransactionLegacy:cs,blobsToCommitments:wr,blobsToProofs:_r,boolToBytes:Er,boolToHex:vr,bytesToBigInt:Sr,bytesToBool:xr,bytesToHex:V,bytesToNumber:Tr,bytesToRlp:Ir,bytesToString:Pr,ccipFetch:ht,ccipRequest:ht,checksumAddress:Wt,commitmentToVersionedHash:as,commitmentsToVersionedHashes:Cr,compactSignatureToHex:yt,compactSignatureToSignature:jd,concat:Pt,concatBytes:Ar,concatHex:Rr,createClient:Je,createNonceManager:$c,createPublicClient:Wc,createTestClient:Cd,createTransport:es,createWalletClient:Ad,custom:Br,decodeAbiParameters:ze,decodeDeployData:Md,decodeErrorResult:Mr,decodeEventLog:kr,decodeFunctionData:Lr,decodeFunctionResult:qr,defineBlock:Or,defineChain:Nr,defineKzg:Ms,defineTransaction:jr,defineTransactionReceipt:Fr,defineTransactionRequest:Ur,deploylessCallViaBytecodeBytecode:Hr,deploylessCallViaFactoryBytecode:Dr,domainSeparator:Gr,encodeAbiParameters:zr,encodeDeployData:Vt,encodeErrorResult:Vr,encodeEventTopics:$r,encodeFunctionData:Wr,encodeFunctionResult:Kr,encodePacked:Kc,erc1155Abi:Jr,erc20Abi:Yr,erc20Abi_bytes32:Qr,erc4626Abi:Xr,erc6492SignatureValidatorAbi:ot,erc6492SignatureValidatorByteCode:it,erc721Abi:Zr,ethAddress:eo,etherUnits:Dt,extractChain:cu,fallback:Zc,formatBlock:to,formatEther:so,formatGwei:ao,formatLog:no,formatTransaction:ro,formatTransactionReceipt:oo,formatTransactionRequest:be,formatUnits:io,fromBlobs:kd,fromBytes:co,fromHex:uo,fromRlp:Ye,getAbiItem:lo,getAddress:F,getChainContractAddress:fo,getContract:Pd,getContractAddress:iu,getContractError:ho,getCreate2Address:ms,getCreateAddress:hs,getEventSelector:ct,getEventSignature:ie,getFunctionSelector:ut,getFunctionSignature:ie,getSerializedTransactionType:Is,getTransactionType:mo,getTypesForEIP712Domain:Yt,gweiUnits:Gt,hashDomain:go,hashMessage:Lt,hashStruct:po,hashTypedData:qt,hexToBigInt:P,hexToBool:yo,hexToBytes:K,hexToCompactSignature:pt,hexToNumber:k,hexToRlp:bo,hexToSignature:ft,hexToString:wo,http:_o,isAddress:Ft,isAddressEqual:ye,isBytes:De,isErc6492Signature:vs,isErc8010Signature:Ss,isHash:ps,isHex:b,keccak256:X,labelhash:Eo,maxInt104:vo,maxInt112:So,maxInt120:xo,maxInt128:To,maxInt136:Io,maxInt144:Po,maxInt152:Co,maxInt16:Ao,maxInt160:Ro,maxInt168:Bo,maxInt176:Mo,maxInt184:ko,maxInt192:Lo,maxInt200:qo,maxInt208:Oo,maxInt216:No,maxInt224:jo,maxInt232:Fo,maxInt24:Uo,maxInt240:Ho,maxInt248:Do,maxInt256:Go,maxInt32:zo,maxInt40:Vo,maxInt48:$o,maxInt56:Wo,maxInt64:Ko,maxInt72:Jo,maxInt8:Yo,maxInt80:Qo,maxInt88:Xo,maxInt96:Zo,maxUint104:ei,maxUint112:ti,maxUint120:si,maxUint128:ai,maxUint136:ni,maxUint144:ri,maxUint152:oi,maxUint16:ii,maxUint160:ci,maxUint168:ui,maxUint176:di,maxUint184:li,maxUint192:fi,maxUint200:hi,maxUint208:mi,maxUint216:gi,maxUint224:pi,maxUint232:yi,maxUint24:bi,maxUint240:wi,maxUint248:_i,maxUint256:Ei,maxUint32:vi,maxUint40:Si,maxUint48:xi,maxUint56:Ti,maxUint64:Ii,maxUint72:Pi,maxUint8:Ci,maxUint80:Ai,maxUint88:Ri,maxUint96:Bi,minInt104:Mi,minInt112:ki,minInt120:Li,minInt128:qi,minInt136:Oi,minInt144:Ni,minInt152:ji,minInt16:Fi,minInt160:Ui,minInt168:Hi,minInt176:Di,minInt184:Gi,minInt192:zi,minInt200:Vi,minInt208:$i,minInt216:Wi,minInt224:Ki,minInt232:Ji,minInt24:Yi,minInt240:Qi,minInt248:Xi,minInt256:Zi,minInt32:ec,minInt40:tc,minInt48:sc,minInt56:ac,minInt64:nc,minInt72:rc,minInt8:oc,minInt80:ic,minInt88:cc,minInt96:uc,multicall3Abi:dc,namehash:lc,nonceManager:Jc,numberToBytes:fc,numberToHex:R,offchainLookup:tu,offchainLookupAbiItem:su,offchainLookupSignature:au,pad:Tt,padBytes:hc,padHex:Ue,parseAbi:mc,parseAbiItem:gc,parseAbiParameter:ou,parseAbiParameters:pc,parseCompactSignature:pt,parseErc6492Signature:vu,parseErc8010Signature:Su,parseEther:Lu,parseEventLogs:yc,parseGwei:qu,parseSignature:ft,parseTransaction:Ps,parseUnits:Qe,prepareEncodeFunctionData:bc,presignMessagePrefix:wc,publicActions:_c,recoverAddress:ee,recoverMessageAddress:xs,recoverPublicKey:Ec,recoverTransactionAddress:Fd,recoverTypedDataAddress:Ts,ripemd160:wu,rpcSchema:vc,rpcTransactionType:Sc,serializeAccessList:Yc,serializeCompactSignature:yt,serializeErc6492Signature:Qc,serializeErc8010Signature:xu,serializeSignature:dt,serializeTransaction:fs,serializeTypedData:Xt,setErrorConfig:xc,setupKzg:Nd,sha256:Tc,shouldThrow:eu,sidecarsToVersionedHashes:Ld,signatureToCompactSignature:Ud,signatureToHex:dt,size:Rt,slice:It,sliceBytes:Ic,sliceHex:Ge,stringToBytes:Pc,stringToHex:Cc,stringify:Ac,testActions:Rs,toBlobSidecars:Nt,toBlobs:Rc,toBytes:H,toCoinType:Od,toEventHash:lt,toEventSelector:ct,toEventSignature:ie,toFunctionHash:lt,toFunctionSelector:ut,toFunctionSignature:ie,toHex:Bt,toPrefixedMessage:Bc,toRlp:Ct,transactionType:Mc,trim:Ht,universalSignatureValidatorAbi:ot,universalSignatureValidatorByteCode:it,validateTypedData:Qt,verifyHash:Tu,verifyMessage:Iu,verifyTypedData:Pu,walletActions:Bs,webSocket:Rd,weiUnits:kc,withCache:Lc,withRetry:qc,withTimeout:Mt,zeroAddress:Oc,zeroHash:Xc},Symbol.toStringTag,{value:"Module"}));var Xe={},ve={},ks={},ge={},Ls={},ae={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.getSDKVersion=void 0;const Dd=()=>"9.1.0";ne.getSDKVersion=Dd;var Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.generateRequestId=void 0;const Gd=e=>e.toString(16).padStart(2,"0"),zd=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,Gd).join("")},Vd=()=>typeof window<"u"?zd(10):new Date().getTime().toString(36);Se.generateRequestId=Vd;Object.defineProperty(ae,"__esModule",{value:!0});ae.MessageFormatter=void 0;const $d=ne,Wd=Se;class xe{}ae.MessageFormatter=xe;xe.makeRequest=(e,t)=>({id:(0,Wd.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,$d.getSDKVersion)()}});xe.makeResponse=(e,t,a)=>({id:e,success:!0,version:a,data:t});xe.makeErrorResponse=(e,t,a)=>({id:e,success:!1,error:t,version:a});var N={};Object.defineProperty(N,"__esModule",{value:!0});N.RestrictedMethods=N.Methods=void 0;var bt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(bt||(N.Methods=bt={}));var wt;(function(e){e.requestAddressBook="requestAddressBook"})(wt||(N.RestrictedMethods=wt={}));(function(e){var t=B&&B.__createBinding||(Object.create?function(r,i,c,o){o===void 0&&(o=c);var d=Object.getOwnPropertyDescriptor(i,c);(!d||("get"in d?!i.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(r,o,d)}:function(r,i,c,o){o===void 0&&(o=c),r[o]=i[c]}),a=B&&B.__exportStar||function(r,i){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const s=ae;class n{constructor(i=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:o,data:d,source:l})=>{const f=!d,h=!this.isServer&&l===window.parent,u=typeof d.version<"u"&&parseInt(d.version.split(".")[0]),m=typeof u=="number"&&u>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(p=>p.test(o))!==void 0),!f&&h&&m&&g},this.logIncomingMessage=o=>{console.info(`Safe Apps SDK v1: A message was received from origin ${o.origin}. `,o.data)},this.onParentMessage=o=>{this.isValidMessage(o)&&(this.debugMode&&this.logIncomingMessage(o),this.handleIncomingMessage(o.data))},this.handleIncomingMessage=o=>{const{id:d}=o,l=this.callbacks.get(d);l&&(l(o),this.callbacks.delete(d))},this.send=(o,d)=>{const l=s.MessageFormatter.makeRequest(o,d);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((f,h)=>{this.callbacks.set(l.id,u=>{if(!u.success){h(new Error(u.error));return}f(u)})})},this.allowedOrigins=i,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=n,a(N,e)})(Ls);var Te={},Ie={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.isObjectEIP712TypedData=void 0;const Kd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Pe.isObjectEIP712TypedData=Kd;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});var Os={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Fc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Os);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});(function(e){var t=B&&B.__createBinding||(Object.create?function(s,n,r,i){i===void 0&&(i=r);var c=Object.getOwnPropertyDescriptor(n,r);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(s,i,c)}:function(s,n,r,i){i===void 0&&(i=r),s[i]=n[r]}),a=B&&B.__exportStar||function(s,n){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),a(Pe,e),a(qs,e),a(Os,e),a(Ns,e)})(Ie);Object.defineProperty(Te,"__esModule",{value:!0});Te.TXs=void 0;const de=N,Jd=Ie;class Yd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(de.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const a={message:t};return(await this.communicator.send(de.Methods.signMessage,a)).data}async signTypedMessage(t){if(!(0,Jd.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(de.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:a}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:a};return(await this.communicator.send(de.Methods.sendTransactions,s)).data}}Te.TXs=Yd;var Ce={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.RPC_CALLS=void 0;Y.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.Eth=void 0;const L=Y,Qd=N,j={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Xd{constructor(t){this.communicator=t,this.call=this.buildRequest({call:L.RPC_CALLS.eth_call,formatters:[null,j.defaultBlockParam]}),this.getBalance=this.buildRequest({call:L.RPC_CALLS.eth_getBalance,formatters:[null,j.defaultBlockParam]}),this.getCode=this.buildRequest({call:L.RPC_CALLS.eth_getCode,formatters:[null,j.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:L.RPC_CALLS.eth_getStorageAt,formatters:[null,j.blockNumberToHex,j.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:L.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:L.RPC_CALLS.eth_getBlockByHash,formatters:[null,j.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:L.RPC_CALLS.eth_getBlockByNumber,formatters:[j.blockNumberToHex,j.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:L.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:L.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:L.RPC_CALLS.eth_getTransactionCount,formatters:[null,j.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:L.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=a=>this.buildRequest({call:L.RPC_CALLS.eth_estimateGas})([a]),this.setSafeSettings=this.buildRequest({call:L.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:a,formatters:s}=t;return async n=>{s&&Array.isArray(n)&&s.forEach((c,o)=>{c&&(n[o]=c(n[o]))});const r={call:a,params:n||[]};return(await this.communicator.send(Qd.Methods.rpcCall,r)).data}}}Ce.Eth=Xd;var Ae={};const Zd=Nc(Hd);var $={};Object.defineProperty($,"__esModule",{value:!0});$.MAGIC_VALUE_BYTES=$.MAGIC_VALUE=void 0;const el="0x1626ba7e";$.MAGIC_VALUE=el;const tl="0x20c13b0b";$.MAGIC_VALUE_BYTES=tl;var Ze={},re={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.PermissionsError=D.PERMISSIONS_REQUEST_REJECTED=void 0;D.PERMISSIONS_REQUEST_REJECTED=4001;class et extends Error{constructor(t,a,s){super(t),this.code=a,this.data=s,Object.setPrototypeOf(this,et.prototype)}}D.PermissionsError=et;Object.defineProperty(re,"__esModule",{value:!0});re.Wallet=void 0;const Ne=N,le=D;class sl{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(Ne.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new le.PermissionsError("Permissions request is invalid",le.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(Ne.Methods.wallet_requestPermissions,t)).data}catch{throw new le.PermissionsError("Permissions rejected",le.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(a=>typeof a=="object"?Object.keys(a).every(s=>!!Object.values(Ne.RestrictedMethods).includes(s)):!1)}}re.Wallet=sl;Object.defineProperty(Ze,"__esModule",{value:!0});const al=re,_t=D,Et=(e,t)=>t.some(a=>a.parentCapability===e),nl=()=>(e,t,a)=>{const s=a.value;return a.value=async function(){const n=new al.Wallet(this.communicator);let r=await n.getPermissions();if(Et(t,r)||(r=await n.requestPermissions([{[t]:{}}])),!Et(t,r))throw new _t.PermissionsError("Permissions rejected",_t.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},a};Ze.default=nl;var rl=B&&B.__decorate||function(e,t,a,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,a):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,a,s);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,a,r):i(t,a))||r);return n>3&&r&&Object.defineProperty(t,a,r),r},ol=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.Safe=void 0;const fe=Zd,vt=$,U=N,St=Y,il=Ie,cl=ol(Ze);class js{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(U.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(U.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(U.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,a="0x"){const s=await this.getInfo(),n=(0,fe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,a]}),r={call:St.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(U.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===vt.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,a="0x"){const s=await this.getInfo(),n=(0,fe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,a]}),r={call:St.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(U.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===vt.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,fe.hashMessage)(t)}calculateTypedMessageHash(t){const a=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const n=Object.values(t.types),r=Object.keys(t.types).filter(i=>n.every(c=>c.every(({type:o})=>o.replace("[","").replace("]","")!==i)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return(0,fe.hashTypedData)({message:t.message,domain:{...t.domain,chainId:a,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(U.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,a="0x"){let s;if(typeof t=="string"&&(s=async()=>{const n=this.calculateMessageHash(t);return await this.isMessageHashSigned(n,a)}),(0,il.isObjectEIP712TypedData)(t)&&(s=async()=>{const n=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(n,a)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,a="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const n of s)if(await n(t,a))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(U.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(U.Methods.requestAddressBook,void 0)).data}}Ae.Safe=js;rl([(0,cl.default)()],js.prototype,"requestAddressBook",null);var ul=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});const dl=ul(Ls),ll=Te,fl=Ce,hl=Ae,ml=re;class gl{constructor(t={}){const{allowedDomains:a=null,debug:s=!1}=t;this.communicator=new dl.default(a,s),this.eth=new fl.Eth(this.communicator),this.txs=new ll.TXs(this.communicator),this.safe=new hl.Safe(this.communicator),this.wallet=new ml.Wallet(this.communicator)}}ge.default=gl;(function(e){var t=B&&B.__createBinding||(Object.create?function(i,c,o,d){d===void 0&&(d=o);var l=Object.getOwnPropertyDescriptor(c,o);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[o]}}),Object.defineProperty(i,d,l)}:function(i,c,o,d){d===void 0&&(d=o),i[d]=c[o]}),a=B&&B.__exportStar||function(i,c){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(c,o)&&t(c,i,o)},s=B&&B.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const n=s(ge);e.default=n.default,a(ge,e),a(Ie,e),a(N,e),a(ae,e);var r=ne;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),a(Y,e)})(ks);var W={};Object.defineProperty(W,"__esModule",{value:!0});W.numberToHex=W.getLowerCase=void 0;function pl(e){return e&&e.toLowerCase()}W.getLowerCase=pl;function yl(e){return`0x${e.toString(16)}`}W.numberToHex=yl;Object.defineProperty(ve,"__esModule",{value:!0});ve.SafeAppProvider=void 0;const z=ks,bl=nu,q=W;class wl extends bl.EventEmitter{constructor(t,a){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=a}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var n,r,i,c;const{method:a,params:s=[]}=t;switch(a){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,q.numberToHex)(this.chainId);case"personal_sign":{const[h,u]=s;if(this.safe.safeAddress.toLowerCase()!==u.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,u]=s;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!u.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(u);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,u]=s,m=typeof u=="string"?JSON.parse(u):u;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(m);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const o={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof o.gas=="string"&&o.gas.startsWith("0x")&&(o.gas=parseInt(o.gas,16));const d=await this.sdk.txs.send({txs:[o],params:{safeTxGas:o.gas}});return this.submittedTxs.set(d.safeTxHash,{from:this.safe.safeAddress,hash:d.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:o.data,value:o.value,to:o.to,blockHash:null,blockNumber:null,transactionIndex:null}),d.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,q.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,q.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,q.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,q.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let f=s[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=s[0]),h));case"eth_getTransactionReceipt":{let h=s[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(u=>(u&&(u.transactionHash=s[0]),u))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{const{from:h,calls:u,chainId:m}=s[0];if(m!==(0,q.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const g=u.map((y,x)=>{if(!y.to)throw new Error(`Invalid call #${x}: missing "to" field`);return{to:y.to,data:y.data??"0x",value:y.value??(0,q.numberToHex)(0)}}),{safeTxHash:p}=await this.sdk.txs.send({txs:g});return{id:p}}case"wallet_getCallsStatus":{const h=s[0],u={[z.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[z.TransactionStatus.AWAITING_EXECUTION]:100,[z.TransactionStatus.SUCCESS]:200,[z.TransactionStatus.CANCELLED]:400,[z.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),g={version:"1.0",id:h,chainId:(0,q.numberToHex)(this.chainId),status:u[m.txStatus]};if(!m.txHash)return g;const p=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!p)return g;const _=((r=(n=m.txData)==null?void 0:n.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(i=m.txData.dataDecoded.parameters)==null?void 0:i[0].valueDecoded)==null?void 0:c.length)??1,y=Number(p.blockNumber),x=Number(p.gasUsed);return g.receipts=Array(_).fill({logs:p.logs,status:(0,q.numberToHex)(m.txStatus===z.TransactionStatus.SUCCESS?1:0),blockHash:p.blockHash,blockNumber:(0,q.numberToHex)(y),gasUsed:(0,q.numberToHex)(x),transactionHash:m.txHash}),g}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,q.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,a){t||a("Undefined request"),this.request(t).then(s=>a(null,{jsonrpc:"2.0",id:t.id,result:s})).catch(s=>a(s,null))}}ve.SafeAppProvider=wl;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=ve;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(Xe);const _l=jc(Xe),Pl=ru({__proto__:null,default:_l},[Xe]);export{Pl as i};
